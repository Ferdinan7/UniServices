# ADR-001-v2: Uso del sistema de autenticación de Supabase para el módulo de Autenticación

**Estado:** Adoptado  

## Contexto  
El sistema universitario requiere mecanismos modernos y seguros de autenticación y autorización para alumnos y administrativos.  
Es importante simplificar la experiencia de login, minimizar complejidad operativa y habilitar acceso con cuentas institucionales de Google.  
El sistema debe soportar flujos de autenticación social, autorización robusta para APIs y gestión eficiente de sesiones y roles.  
Este ADR modifica la decisión propuesta en el ADR-001, donde inicialmente se planeó usar Better Auth.  

## Referencia histórica  
Este ADR modifica y reemplaza la decisión propuesta en el ADR-001 (“Uso de Better Auth para el módulo de autenticación”), el cual queda obsoleto tras esta decisión.  

## Decisión  
Se adopta el sistema de autenticación de **Supabase**, aprovechando su soporte nativo para **OAuth2** (incluyendo cuentas institucionales de Google) y **JWT** (para acceso seguro a las APIs).  
Supabase permite que los alumnos ingresen fácilmente con su cuenta de Google y cumple con los requisitos modernos de seguridad sin necesidad de integrar servicios externos complejos.  
Además, ofrece una gestión integrada de usuarios, sesiones y roles que se alinea con el stack JS/TS del proyecto.  

## Consecuencias  
- Se habilita el login directo con cuentas de Google Workspace, mejorando la experiencia de usuario.  
- Las sesiones y permisos en APIs se gestionan mediante JWT, lo que permite que el backend opere de forma “serverless”.  
- Mejora el rendimiento y facilita la escalabilidad.  
- Se reduce el esfuerzo de integración y mantenimiento en comparación con una implementación manual de OAuth2 y JWT.  
- Supabase ofrece flexibilidad para incorporar futuras formas de autenticación (correo, redes sociales, 2FA).  
- La solución está optimizada para entornos JS/TS; otros lenguajes pueden requerir adaptaciones adicionales.  
- Se modifica la propuesta original (ADR-001) debido a la mayor integración y optimización encontradas con Supabase respecto a Better Auth.  

## Alternativas Consideradas  
- OAuth2 sin Supabase.  
- Autenticación solo con JWT.  
- Auth.js / Auth0.  
- Soluciones nativas PHP/Laravel.  
